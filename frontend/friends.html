<h1 class="grad">Venner</h1>
<title>Venner</title>
<!-- Copy pasted from event.html -->
<link rel="stylesheet" href="css/bowling.css">
<div class="parti-wrapper">
  <section id="participants">
  </section>
</div>

<script>
  function addPart (u) {
    let cont = document.createElement('div')
      , lft  = document.createElement('a')
      , rgt  = document.createElement('div')
      , pic  = document.createElement('img')
      , name = document.createElement('span')
      , age  = document.createElement('span')
      ;

    cont.classList.add ('person');
    lft.classList.add  ('left');
    rgt.classList.add  ('right');
    pic.classList.add  ('profile');
    name.classList.add ('name');
    age.classList.add  ('age');

    cont.appendChild(lft);
    cont.appendChild(rgt);
    lft.appendChild(pic);
    rgt.appendChild(name);
    rgt.appendChild(age);

    pic.setAttribute('src', u.pic);
    name.innerText = u.username;
    age.innerText = u.age;

    lft.setAttribute('href', 'profile#' + u.uid);

    party.appendChild(cont);
  }

  window.onload = _ => {
    party = document.querySelector("#participants")

    getMyfriends(fs => {
      getWhoami(me => {
        for (let f of fs) {
          let usr = f.user1 == me.uid ? f.user2 : f.user1;
          if (f.accepted)
            getUser (usr, u => {
              addPart (u);
            });
        }
      });
    });
  }
</script>
