<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="api.js"></script>

<div>
  Title <input type="text" id="title" /></br>
  Desc  <input type="text" id="desc" /></br>
  Place <input type="text" id="place" /></br>
  Date  <input type="text" id="date" value="1970-01-01T00:00:00Z" /></br>
  <input type="button" value="submit" onclick="submit()" />

  <br>

  <table border="1" id="calendar">
    <tr>
      <th colspan="7">December 2018</th>
    </tr>
    <tr>
      <th>Mon</th>
      <th>Tue</th>
      <th>Wed</th>
      <th>Thu</th>
      <th>Fri</th>
      <th>Sat</th>
      <th>Sun</th>
    </tr>

  </table>


  <input type="button" value="submit" onclick="submit()" />
</div>

<script>

  function succ (eid) {
    window.location = "event.html#" + eid;
  }

  function err () {
    alert ("Something went wrong");
  }

  function submit () {
    let title = document.querySelector("#title").value
      , desc  = document.querySelector("#desc").value
      , place = document.querySelector("#place").value
      , date  = document.querySelector("#date").value
      ;

    postMkevent (
      { req_title: title
      , req_desc:  desc
      , req_place: place
      , req_date:  date
      }
      , succ, err);
  }

  function onCalendarClick (btn) {
    alert (btn.innerText);
    document.getElementById("date").value = "2018-12-1";
  }

  window.onload = _ => {
    let table = document.querySelector("#calendar");
    for (let x = 1; x < 30; x+=7) {
      let row = document.createElement("tr");
      for (let i = 0; i < 7; i++) {
        let btn = document.createElement("button");
        btn.innerText = i+x;
        btn.setAttribute('onclick', 'onCalendarClick (this)');
        row.appendChild(btn);
      }
      table.appendChild(row);
    }
  }

</script>
