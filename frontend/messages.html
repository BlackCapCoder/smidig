<link rel="stylesheet" href="css/chat.css" type="text/css" media="all" />
<script src="js/chat.js" charset="utf-8"></script>
<title>Meldinger</title>
<h1 class="grad">Meldinger</h1>

<div class="tabs">
  <button id="mychat" onclick='changeTab(1)'>Mine</button>
  <button onclick='changeTab(2)'>grupper</button>
  <button onclick='changeTab(3)'>Utforsk</button>
</div>

<div class="split">
  <div class="left">
    <div class="tab active">
    </div>
    <div class="tab">
      <a href='javascript:openChat(this)'>Bowlingkveld</a>
    </div>
    <div class="tab">
      <a href='javascript:openChat(this)'>Ponyclub</a>
      <a href='javascript:openChat(this)'>Fotball</a>
    </div>
  </div>
  <div class="right" id="chat-view">
    <div id="chat">
    </div>
    <div id="chat-input">
      <input type="text" placeholder='Skriv meldinger her' id="chatbox" />
    </div>
  </div>
</div>

<script>
 window.addEventListener('load', loadChats)
 function loadChats () {
  getMyChats(chats => {
    for (c of chats) {
      addChat(c);
    }
  });
 }
 function addChat (chat)
 {
  chatElem = document.createElement('a')
  chatElem.innerText = "chat #" + chat.cid
  chatElem.href="javascript:onChatClicked(" + chat.cid + ")";
  document.querySelector(".split .tab:nth-child(1)").appendChild(chatElem)
 }

 function onChatClicked (cid) {
  alert(cid + "clicked!");
  
 }
</script>
