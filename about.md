# Overview

The implementation is split into a frontend and a backend part. The frontend is written in pure html, css and javascript, and the backend is written in Haskell.



# The backend

The backend is written in Haskell. Our main reason for choosing Haskell was that this is Henrik's favorite language, and no one else had an opinion. We also considered Java and Php, but no one but Henrik was really fluent in either of those languages either, so we might as well do Haskell.


The backend does about 3 things:
- It serves static files from the `frontend` folder
- It provides an API for interfacing with a database, and generate javascript functions for each API call
- It gives the user a cookie upon login, verifies this upon subsequent requests, and also define which pages require the user to be logged in


We could have written the entire solution in Haskell rather than to serve static files- and it would arguably have been easier- but we deliberately chose to do as much as possible in HTML, as everyone in the group has experience with this.


The backend makes heavy use of two libraries:
* Servant
* Selda


## Servant

Servant is a web server that is unique in that you describe your API at the type level. Each API endpoint is implemented as a regular Haskell function that is oblivious to how it is communicating with the user.


This makes our code incredibly generic, so we can use the exact same code either to serve our website, or to generate code to interface with it. We could also used it to generate documentation and a bunch of other things that we didn't do.


## Selda

Selda is a DSL for interfacing with a database that is agnostic to what kind of database that actually is. Right now we are just using sqlite for convenience, but we could swap this out for something more heavy duty if we wanted to.


Selda guarantees that no sql injections are possible, and also handles serialization/deserialization for us. As does Servant actually.



# The frontend

As stated earlier, the frontend is written in vanilla html/css/javascript as everyone in our group already knowns this. The single exception is that the javascript functions generated by the backend is using jquery. It can actually generate vanilla javascript too, but with jquery the output becomes readable.


The frontend has a special file called `theme.html` that contains a single `%`. All pages that require the user to be logged in is spliced into this file at the point where the `%` is.
